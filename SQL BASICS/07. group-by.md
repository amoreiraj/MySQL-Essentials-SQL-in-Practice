# The SQL `GROUP BY` Clause

The `GROUP BY` clause is used to **group rows that have the same values in one or more columns**.
It is commonly used together with **aggregate functions** to produce summarised results.

---

## What Is `GROUP BY` Used For?

`GROUP BY` is used to answer questions such as:

- How many reservations exist per hotel?
- What is the average value of a meal plan?
- How many reservations were made per month?
- What is the total sales per category?

---

## Common Aggregation Functions

The `GROUP BY` clause is almost always used with aggregation functions:

- `COUNT()` → counts rows
- `SUM()` → adds values
- `AVG()` → calculates the average
- `MIN()` → returns the minimum value
- `MAX()` → returns the maximum value

---

## Simple Example

Assume a table called `hotel_reservations` with the column `booking_status`.

```sql
SELECT booking_status, COUNT(*) AS total_reservas
FROM hotel_reservations
GROUP BY booking_status;
```

### What This Query Does

- Groups rows by the value of `booking_status`
- Counts how many reservations exist in each group
- Returns one row per booking status

### Expected Output (Example)

| booking_status | total_reservas |
|----------------|----------------|
| Canceled       | 120            |
| Confirmed      | 380            |

---

## Example: Reservations per Month

```sql
SELECT arrival_month, COUNT(*) AS total_per_month
FROM hotel_reservations
GROUP BY arrival_month
ORDER BY arrival_month;
```

### Explanation

- Rows are grouped by `arrival_month`
- Each distinct month becomes one result row
- `COUNT(*)` calculates how many reservations exist per month
- `ORDER BY` is used to sort the final results

### Example Output

| arrival_month | total_per_month |
|---------------|-----------------|
| 2             | 1               |
| 3             | 1               |
| 4             | 2               |
| 5             | 1               |
| 6             | 1               |
| 7             | 1               |
| 8             | 1               |
| 9             | 2               |
| 10            | 7               |
| 11            | 4               |
| 12            | 1               |

---

## How to Read the Output

- February, March, May, June, July, August, and December each have **1 arrival**
- April and September have **2 arrivals**
- October has **7 arrivals**
- November has **4 arrivals**

---

## Key Rules of `GROUP BY`

- Every column in the `SELECT` clause must either:
  - Appear in the `GROUP BY`, or
  - Be used inside an aggregate function
- `GROUP BY` does **not** sort results
- Sorting must be done using `ORDER BY`

---

## Key Takeaways

- `GROUP BY` groups rows with the same values
- Each group produces one result row
- Aggregation functions summarize data per group
- `ORDER BY` controls sorting, not `GROUP BY`

